# Choose next bot

Простенький телеграм-бот для выбора случайным образом ведущего среди зарегистрировавшихся участников группы.

Работающий образец (_на 20.10.2024_): [@PTChooseNext_bot](https://t.me/PTChooseNext_bot)

## Порядок использования
1. добавляете бота в групповой чат;
2. используя меню, каждый желающий добавляет себя в список участников (должно быть больше 3-х участников по умолчанию);
3. в меню выбираете пункт `/next`, и бот выберет ведущего.

## Вариант использования
Изначально задуман для того, чтобы указывать на участника группы, который следующим будет постить пачку мемчиков в чат. Как только ведущий выполняет эту важную миссию, то может также назначить следующего нажатием на кнопку `/next`.

## Особенности выборки
Для того, чтобы одни и те же люди не назначались слишком часто, бот выбирает ведущего среди трёх участников, которые раньше всех были назначены ведущими. Если участник ни разу ещё не был ведущим, его дата предыдущего участия приравнивается к нулю.


## Самостоятельная установка и запуск

### Подготовка к установке

1. В телеграм необходимо создать собственного бота и запомнить его токен (❗❗❗ Никому не показывайте токен вашего телеграм-бота и не храните его в открытом виде. Это небезопасно❗❗❗ )
2. В корне скачанного репозитория необходимо добавить файл `.env` следующего содержания:
```bash
TELEGRAM_TOKEN=<токен_вашего_бота>
```

### Установка 

```bash
npm install
```

### Запуск в режиме разработки
Для запуска в режиме разработки используется [ncc](https://github.com/vercel/ncc), который необходимо установить глобально, после чего выполнить команду:
```bash
npm run dev
```

### Сборка проекта

```bash
npm run build
```
результат будет находиться в каталоге `dist`

### Рекомендации по запуску на в облачном сервисе
1. Ubuntu с установленным NodeJS (NPM)
2. удобно использовать [Process Manager 2](https://github.com/Unitech/pm2). Если задействуете его, то необходимо выполнить команду:
```bash
pm2 start dist/index.js
```
